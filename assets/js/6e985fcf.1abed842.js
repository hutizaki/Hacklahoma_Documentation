"use strict";(globalThis.webpackChunkhacklahoma_documentation=globalThis.webpackChunkhacklahoma_documentation||[]).push([[5221],{7250:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>n,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"hacker-portal/database/migrations","title":"Migrations","description":"- Optional fields \u2014 New optional fields with defaults don\'t require a migration; Mongoose handles them.","source":"@site/docs/hacker-portal/database/migrations.mdx","sourceDirName":"hacker-portal/database","slug":"/hacker-portal/database/migrations","permalink":"/Hacklahoma_Documentation/docs/hacker-portal/database/migrations","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/hacker-portal/database/migrations.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Migrations","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Models and Schema","permalink":"/Hacklahoma_Documentation/docs/hacker-portal/database/models-schema"},"next":{"title":"Backups and Restore","permalink":"/Hacklahoma_Documentation/docs/hacker-portal/database/backups-restore"}}');var o=t(4848),r=t(8453);const n={title:"Migrations",sidebar_position:2},i="Migrations",c={},d=[];function l(e){const a={a:"a",code:"code",h1:"h1",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.header,{children:(0,o.jsx)(a.h1,{id:"migrations",children:"Migrations"})}),"\n",(0,o.jsxs)(a.ul,{children:["\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"Optional fields"})," \u2014 New optional fields with defaults don't require a migration; Mongoose handles them."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"password \u2192 passwordHash"})," \u2014 Legacy users may have a ",(0,o.jsx)(a.code,{children:"password"})," field; the script ",(0,o.jsx)(a.code,{children:"migrate-password-to-password-hash.js"})," normalizes them. Run it ",(0,o.jsx)(a.strong,{children:"after"})," restoring a backup (e.g. into TEST_PROD) so logins work."]}),"\n",(0,o.jsxs)(a.li,{children:[(0,o.jsx)(a.strong,{children:"When to run"})," \u2014 After any restore from a backup that might contain old schema data; CI does this for the E2E baseline."]}),"\n"]}),"\n",(0,o.jsx)(a.hr,{}),"\n",(0,o.jsxs)(a.p,{children:[(0,o.jsx)(a.strong,{children:"Related:"})," ",(0,o.jsx)(a.a,{href:"/docs/hacker-portal/database/backups-restore",children:"Backups and restore"}),", ",(0,o.jsx)(a.a,{href:"/docs/hacker-portal/database/models-schema",children:"Models and schema"})]})]})}function h(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,o.jsx)(a,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,a,t)=>{t.d(a,{R:()=>n,x:()=>i});var s=t(6540);const o={},r=s.createContext(o);function n(e){const a=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function i(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:n(e.components),s.createElement(r.Provider,{value:a},e.children)}}}]);